<!DOCTYPE html>
<html>
<head>
<title id="title"></title>
<style>
body
{
    background-color: white;
}

#input
{
    height: 20px;
    width: 50%;
    font-size: 20px;
}

#p
{
    background-color: white;
    color: black;
}
</style>
</head>
<body id="body">
<p id="p">背景色を入力してください...</p>
<input type="text" id="input" oninput="URLparams()">
<script>
function onLoad()
{
    var Input = document.getElementById('input');
    var url = new URL(window.location.href);
    var params = url.searchParams;
    var text = params.get('backgroundColor');

    Input.value = text;
    var title = document.getElementById('title');
    title.innerText = text;

    try
    {
        var body = document.getElementById('body');
        body.style.backgroundColor = text;
    } catch(error) {
        console.warn('カラーが無効です。');
    }
}
onLoad();

function URLparams()
{
    var Input = document.getElementById('input');
    // URLSearchParamsオブジェクトを作成
    var searchParams = new URLSearchParams(window.location.search);

    // パラメーターを更新
    searchParams.set('backgroundColor', Input.value);

    // 新しいURLを作成し、ページをリロード
    var newUrl = window.location.pathname + '?' + searchParams.toString();

    window.history.replaceState({}, '', newUrl);

    var title = document.getElementById('title');
    title.innerText = Input.value;

    try
    {
        var body = document.getElementById('body');
        body.style.backgroundColor = input.value;
    } catch(error) {
        console.warn('カラーが無効です。');
    }
}
</script>
</body>
</html>
